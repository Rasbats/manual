<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plugin API Versions :: OpenCPN Developer Manual</title>
    <link rel="canonical" href="https://leamas.github.io/ocpn-manuals/ocpn-dev-manual/5.3.1/plugin_api_versions.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://leamas.github.io/ocpn-manuals">OpenCPN Developer Manual</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ocpn-dev-manual" data-version="5.3.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">OpenCPN Developer Manual</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer Manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="community.html">Community</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="prerequisites.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="compiling_linux.html">Compiling on Linux</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="building-on-armhf-linux-armbian-orange-pi.html">Building on armhf linux - Armbian - Orange Pi</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="building_on_motorola_xoom.html">Building on Motorola Xoom</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compiling_on_slackware.html">Compile on Slackware</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rpi2.html">Compile on Raspberry PI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="compiling_windows.html">Compiling on Windows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="compiling_mac_osx.html">Compiling on macOS</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="modularized_packaging.html">Modularized Packaging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="code_formatting.html">Code Formatting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="messaging.html">Messaging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugin API</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="plugin_api_versions.html">Plugin API Versions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ocpn_draw_odapi.html">OCPN Draw ODAPI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="standalone_plugin_compilation.html">Plugin Compilation Win</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting_plugins.html">Troubleshooting Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="plugin_guidelines.html">Plugin Guidelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="plugin_documentation.html">Plugin Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="plugin_submissions.html">Plugin Submissions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Learning</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testplugin.html">Testplugin and Frontend2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="demo_plugin.html">Demonstration Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="coding_solutions.html">Coding Solutions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fork_build_windows.html">Fork and Build (Windows)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="oplaydo1.html">oplaydo1 (Windows)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fork_and_build_linux.html">Fork and Build (Linux)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="oplaydo1_linux.html">oplaydo1 (Linux)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bug_and_feature_tracking.html">Bugs and feature tracking</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_dependencies.html">PI Dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_installer_summary.html">PI Manager Summary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_installler_dev_setup.html">PI Manager Dev Setup</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_installer_catalog_meta.html">PI Manager Catalog &amp; Meta-Url</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_installer_summary.html">PI Manager Dev Procedure</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ci-push-build-to-git.html">CI: Push build to Git Release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ci-push-linux-build-to-launchpad.html">CI: Push Linux Build to Launchpad</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ci_travis_encryption_windows.html">CI: Travis Encryption for Windows Dev</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="advanceddebugtips.html">CI Advanced Debug Tips</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="codacy.html">Codacy:Automate code quality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testquality.html">TestQuality -Test Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="online_tools.html">Online Nmea Tools</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="user_interface_styling.html">User Interface Styling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="updating_the_user_manual.html">Updating the User Manual</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../shipdriver/0.0.1/shipdriver.html">Shipdriver manual DEMO</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenCPN Developer Manual</span>
    <span class="version">5.3.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../AlternativeWorkflow/index.html">Alternative Managed Workflow for OpenCPN plugins</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../AlternativeWorkflow/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">OpenCPN Developer Manual</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">5.3.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../plugin-installer/0.0.1/Home.html">Plugin Installer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../plugin-installer/0.0.1/Home.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../shipdriver/0.0.1/shipdriver.html">ShipDriver OpenCPN plugin docs.</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../shipdriver/0.0.1/shipdriver.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="developer_guide.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenCPN Developer Manual</a></li>
    <li>Developer Manual</li>
    <li>Plugin API</li>
    <li><a href="plugin_api_versions.html">Plugin API Versions</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Plugin API Versions</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>OpenCPN 3.1.x is downward compatible with all previously built and/or
distributed Plugins:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Inversely, older Plugins are upward compatible with new versions of
OpenCPN.</p>
</li>
<li>
<p>Except when there is a change in the wxWidgets version.</p>
</li>
<li>
<p>When there is a change in the wxWidgets version, all plugins must be
recompiled using the new wxWidgets version.</p>
</li>
<li>
<p>The minimum plugin API number that is required for a given plugin is
shown in the Plugin API in the source code (see below).</p>
</li>
<li>
<p>The plugin API is contained in the <em>opencpn.lib</em> file.</p>
</li>
<li>
<p>Upward compatibility is a fixed design goal (with the exception of
wxWidgets changes).</p>
<div class="ulist">
<ul>
<li>
<p>But, the opposite is not true. Plugins built to 3.1.x API spec are
not compatible with OpenCPN 3.0.x.</p>
</li>
<li>
<p>And the corollary: OpenCPN 3.0.x is not compatible with Plugins built
to the 3.1.x API spec.</p>
</li>
<li>
<p>This second case should be clear, logically. How could OCPN 3.0.x
anticipate what the the 3.1.x PlugIn API extensions would look like?<br></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, as a Plugin Developer, the model to follow is:<br>
* If you want a durable Plugin that runs on 3.0.x and runs on all
subsequent versions, code to the 3.0.x API.<br>
* …unless…you want the extended features provided by the 3.1.x PlugIn
API, in which case you should use the 3.1.x API to create an Enhanced
Plugin, which will be compatible with 3.1.x and all versions to
follow.<br></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_change_in_wxwidgets_versions_pi_compatibility"><a class="anchor" href="#_change_in_wxwidgets_versions_pi_compatibility"></a>Change in wxWidgets versions &amp; PI Compatibility</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>wxWidgets 2.8 libraries were used for Opencpn versions up to 4.0,
requiring <strong><em>all</em></strong> plugins be updated.</p>
</li>
<li>
<p>wxWidgets 3.0.2 libraries were used for OpenCPN version 4.1 through
4.8.8, requiring <strong><em>all</em></strong> plugins be updated for compatibility with this
new library, which of course has reset the compatibility bar, and made
those new plugins only forward compatible from version 4.1.</p>
</li>
<li>
<p>wxWidgets 3.1.1 libraries are used for OpenCPN version 4.99.xx and up
requiring <strong><em>all</em></strong> plugins be updated.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plugin_api_designation"><a class="anchor" href="#_plugin_api_designation"></a>Plugin API Designation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Plugin API Designation found in the github/[plugin]_pi/src/ocpn_plugoin.h file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#define     MY_API_VERSION_MAJOR    1
#define     MY_API_VERSION_MINOR    13</pre>
</div>
</div>
<div class="sect2">
<h3 id="_plugin_file_name_format"><a class="anchor" href="#_plugin_file_name_format"></a>Plugin File Name Format</h3>
<div class="paragraph">
<p>*lib_* <strong class="<em>PluginName</em>"><em></strong> <strong class="_OSdesignation</em>"><em>pi</strong> <strong class="_Plugin-API</em>"><em>v</strong>
<strong class="_VersionNumber</em>">_pi.dll</strong><br>
eg: <strong>lib_aisradar_win32_pi18_v32_pi.dll</strong><br>
eg: <strong>lib_aisradar_win32_pi.dll</strong> (Simpler version) eg:
<strong>lib_aisradar_win32_pi18_v32_pi.exe </strong> (as an executable)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>lib</em></strong> is the designation for a released plugin. Beta Versions of
plugins will not have the [LIB] prefix.</p>
</li>
<li>
<p><strong><em>PluginNam</em>e</strong> is the name of the plugin.</p>
</li>
<li>
<p><strong><em>OSdesignation</em></strong> is Operating system designation "win32" or "win64",
etc.</p>
</li>
<li>
<p><strong><em>Plugin-API</em></strong> is the Plugin API number required by this PlugIn "18",
19", "10", etc. which also equates to designated main OCPN program API
numbers. See chart below.</p>
</li>
<li>
<p><strong><em>VersionNumber</em></strong> is the private version number of the Plugin itself,
controlled by the Plugin developer.</p>
</li>
<li>
<p><strong><em>.dll</em></strong> Means that the plugin is a Windows version of the plugin,
probably compiled using MSVC</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_plugin_pi_api_versions_and_opencpn_version_compatibility"><a class="anchor" href="#_plugin_pi_api_versions_and_opencpn_version_compatibility"></a>Plugin (pi) API Versions and OpenCPN Version Compatibility</h3>
<div class="paragraph">
<p>In plugin filenames there generally be will be a designation as above
(it is part of the plugin filename format).<br>
It tells which API version is needed and, if it was built against the
right codebase, with which version it should run - Startup of Opencpn
leaves messages in the opencpn.log regarding the status of each plugin.
If the plugin is not installed because the current Opencpn version does
not support it, the piXXX designation will help you decipher what the
problem is and what can be done.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pi18 (1.8) = OpenCPN 3.0 [Use oldest supported Opencpn 3.2.2] +
pi19 (1.9) = OpenCPN 3.2 [Use oldest supported Opencpn 3.2.2] +
pi19 (1.9) = OpenCPN 3.2.2 [Oldest supported version] +
pi110 (1.10) = OpenCPN 3.3.x +
pi110 (1.10) = OpenCPN 3.4 &lt;—wxWidgets 2.8.1 used +
pi111 (1.11) = OpenCPN 3.4 &lt;—wxWidgets 2.8.1 used +
pi112 (1.12) = OpenCPN 3.4 &lt;—wxWidgets 2.8.1 used +
pi112 (1.12) = OpenCPN 4.0 &lt;—wxWidgets 2.8.1 used +
pi113 (1.13) = OpenCPN 4.1 &lt;—*_wxWidgets 3.0.2 first used_* +</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Plugins must be compiled using wxWidgets 3.0.2 to be compatible. pi113
(1.13) = OpenCPN 4.2 &#8592;SVG Icons added (gtk,expat,vc,etc)<br>
pi114 (1.14) = OpenCPN 4.5.307 &#8592;Externalize AIS drwg #795
-Rel.Candidate
pi114 (1.14) = OpenCPN 4.8.0 See Note just below, when API 1.14 was
fixed pi114 (1.14) = OpenCPN 4.8.0 Changed API 1.14 to work in MS
Windows for BR24beta</p>
</li>
<li>
<p>Externalize AIS drawing #869 8/10/2017 .</p>
</li>
<li>
<p>API 1.14 fully working in OpenCPN 4.8.0.</p>
</li>
<li>
<p>In the broken OpenCPN 4.6.0 implementation nobody was using that
feature of the API until it was fixed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>pi115 (1.15) = OpenCPN 4.8.2</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extend with functions providing min/max available basemap quality #974</p>
</li>
<li>
<p>Fix Grib plugin to use same screen size as main application #893</p>
</li>
<li>
<p>Implement api call for plugin to handle autopilot routing #996</p>
</li>
<li>
<p>Correct route &amp; track messages so they can actually be used by plugins
#995</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>pi116 (1.16) = OpenCPN 4.99 (5.00 or ov50) &lt;—<strong><em>wxWidgets 3.1.2 first
used</em></strong><br>
* Plugins must be compiled using wxWidgets 3.1.2 to be compatible. pi117
(1.17) = OpenCPN 5.x with wxWidgets 3.1.2, new Plugin Manager &amp;
Versioning</p>
</div>
<div class="ulist">
<ul>
<li>
<p>See
<a href="http://www.cruisersforum.com/forums/f134/beta-test-technical-30929-4.html#post2983613">Cruiser
Forum Post 2502</a></p>
</li>
<li>
<p>Adds extern DECL_EXP bool ShuttingDown( void );</p>
</li>
<li>
<p>Adds extern DECL_EXP wxString GetPluginDataDir(const char*
plugin_name);</p>
</li>
<li>
<p>Found in github.com/Opencpn/include</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_available_as_compressed_download"><a class="anchor" href="#_available_as_compressed_download"></a>Available as compressed download</h3>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="/opencpn/dev/plugins/beta_plugins/plugin_api/opencpn-lib.zip" alt="Opencpn-lib.zip"></span></p>
</li>
<li>
<p><span class="image"><img src="/opencpn/dev/plugins/beta_plugins/plugin_api/opencpn-lib.7z" alt="Opencpn-lib.7z"></span></p>
</li>
<li>
<p><a href="http://sourceforge.net/projects/opencpnplugins/files/windows_opencpn_development_libraries/">Sourceforge:
opencpnplugins Windows Opencpn Development Libraries/</a><br>
*
<a href="http://sourceforge.net/projects/opencpnplugins/files/opencpn_lib/">Sourceforge
opencpnplugins Opencpn_Lib</a><br>
Sourceforge files are not as complete.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_head_developer_about_plugins_api"><a class="anchor" href="#_head_developer_about_plugins_api"></a>Head Developer: About Plugins &amp; API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Main program API number is distinct and independent from the OpenCPN
Version number. Each released version of OCPN will support a certain
PlugIn API. As we progress, we expect the API eventually to stabilize,
or at least to evolve more slowly than the main program. This will
happen naturally as we fill out the API to include the commonly required
Plugin functions.<br>
<br>
I think it would be a great idea to bring some order to the Plugin
constellation. There may be some renaming of existing Plugins required,
but that&#8217;s OK at this point. We definitely ask all Plugin developers to
try to follow the naming convention during their development, and
especially after their release. One can see at a glance what the
requirements of a particular Plugin will be.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
