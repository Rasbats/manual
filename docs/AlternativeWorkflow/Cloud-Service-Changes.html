<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: OpenCPN Developer Manual</title>
    <link rel="canonical" href="https://leamas.github.io/ocpn-manuals/AlternativeWorkflow/Cloud-Service-Changes.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../_/css/site.css">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://leamas.github.io/ocpn-manuals">OpenCPN Developer Manual</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="AlternativeWorkflow" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Alternative Managed Workflow for OpenCPN plugins</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Using the Alternative Managed Workflow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Alternative-Workflow.html">The Alternative Workflow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Metadata-Flow.html">Metadata Files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Appveyor.html">Appveyor</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="CircleCI.html">CircleCI</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="Cloud-Service-Changes.html">Cloud service changes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Cloudsmith.html">Cloudsmith</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Travis.html">Travis</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="GitHub.html">GitHub</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Plugin-Adaptation.html">Adapting the plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="CodeChange.html">Code Changes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Local-Build.html">Building locally</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Useful-Stuff.html">Useful information</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Plugin-Dependencies.html">Plugin Dependencies</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Alternative Managed Workflow for OpenCPN plugins</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Alternative Managed Workflow for OpenCPN plugins</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../ocpn-dev-manual/5.3.1/index.html">OpenCPN Developer Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../ocpn-dev-manual/5.3.1/index.html">5.3.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../plugin-installer/0.0.1/Home.html">Plugin Installer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../plugin-installer/0.0.1/Home.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../shipdriver/0.0.1/shipdriver.html">ShipDriver OpenCPN plugin docs.</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../shipdriver/0.0.1/shipdriver.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../ocpn-dev-manual/5.3.1/developer_guide.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Alternative Managed Workflow for OpenCPN plugins</a></li>
    <li><a href="Cloud-Service-Changes.html">Cloud service changes</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Rasbats/managed_plugins/edit/asciidoc/docs/modules/ROOT/pages/Cloud-Service-Changes.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_cloud_service_changes"><a class="anchor" href="#_cloud_service_changes"></a>Cloud Service Changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the changes have been made to the plugin files and a backup
made the GitHub TideFinder repo can be updated with the file changes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_github"><a class="anchor" href="#_github"></a>GitHub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The alternative workflow simplifies the process of updating the plugin
metadata files in
<a href="https://github.com/opencpn/plugins">OpenCPN/plugins</a>.
At the same time as installers for the TideFinder plugin are made the
metadata file is copied to the auto branch of your fork of
OpenCPN/plugins.</p>
</div>
<div class="paragraph">
<p>After the build the changes made in your plugins clone/auto branch can
be pushed to the plugins clone/master branch ready for a pull request to
OpenCPN/plugins.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_circleci"><a class="anchor" href="#_circleci"></a>CircleCI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Go to the project settings for TideFinder</p>
</div>
<div class="paragraph">
<p>Select Environment Variables</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/1.cc.environment.jpg" alt="1.cc.environment.jpg"></span></p>
</div>
<div class="paragraph">
<p>Add the Environment Variable for Cloudsmith - this is the
CLOUDSMITH_API_KEY that was saved previously</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/2.cc.environment.jpg" alt="2.cc.environment.jpg"></span></p>
</div>
<div class="paragraph">
<p>Use the plugins clone SSH url and the password you used for making the
keys to create further Environment Variables in the CircleCI TideFinder
project.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/github/2.plugins.jpg" alt="2.plugins.jpg"></span></p>
</div>
<div class="paragraph">
<p>The Environment Variables should be similar to this.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/github/3.plugins.jpg" alt="3.plugins.jpg"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appveyor"><a class="anchor" href="#_appveyor"></a>Appveyor</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Set the environment variables</strong></p>
</div>
<div class="sect2">
<h3 id="_experimenting_with_a_new_build"><a class="anchor" href="#_experimenting_with_a_new_build"></a>Experimenting with a new build</h3>
<div class="paragraph">
<p>So far none of the pushes to the GitHub TideFinder repo have been
tagged. We will continue like this as we test the build.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># ——– Options ———-

set(OCPN_TEST_REPO opencpn/tidefinder-alpha CACHE STRING // Default repository for untagged builds)

set(OCPN_BETA_REPO opencpn/tidefinder-beta  CACHE STRING // Default repository for tagged builds matching `beta' )

set(OCPN_RELEASE_REPO opencpn/tidefinder-prod CACHE STRING // Default repository for tagged builds not matching beta )</pre>
</div>
</div>
<div class="paragraph">
<p>Make a small non-important change to one of the files and push to the
GitHub TideFinder repo.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_now_check_the_cloud_services_for_errors"><a class="anchor" href="#_now_check_the_cloud_services_for_errors"></a>Now check the Cloud services for errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If any build fails the log for the builder is useful for fixing errors
in the code and/or scripts.</p>
</div>
<div class="paragraph">
<p><strong>Appveyor</strong></p>
</div>
<div class="paragraph">
<p>The appveyor log shows that there is an error in CMakeLists.txt.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>add_library(${CMAKE_PROJECT_NAME} SHARED ${SRC})</pre>
</div>
</div>
<div class="paragraph">
<p>should read:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>add_library(${CMAKE_PROJECT_NAME} SHARED ${SRC_TIDEFINDER})</pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/build.errors/1.appveyor.error.jpg" alt="1.appveyor.error.jpg"></span></p>
</div>
<div class="paragraph">
<p><strong>Travis</strong> The scripts copied from ShipDriver do not have execute
permission. As a result permission to run is denied.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/build.errors/2.travis.error.jpg" alt="2.travis.error.jpg"></span></p>
</div>
<div class="paragraph">
<p>This results from copying script files from ShipDriver to TideFinder on
Windows. Permissions are not copied. To set these again the Git command
can be used for the scripts in ci/.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>git update-index –chmod=+x foo.sh</p>
</li>
<li>
<p>git commit -m ``Adding execute permissions to foo.sh''</p>
</li>
<li>
<p>git push</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>CircleCI</strong> The scripts copied from ShipDriver do not have execute
permission. As a result permission to run is denied.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/build.errors/3.circleci.error.jpg" alt="3.circleci.error.jpg"></span></p>
</div>
<div class="paragraph">
<p>Again this is due to copying files on Windows. Once set as above the
build will work.</p>
</div>
<div class="paragraph">
<p><a href="Alternative-Workflow.html" class="page">The Alternative Workflow</a></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
