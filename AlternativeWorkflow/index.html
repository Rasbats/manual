<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shipdriver Templates for OpenCPN Plugins :: OpenCPN Developer Manual</title>
    <link rel="canonical" href="https://leamas.github.io/ocpn-manuals/AlternativeWorkflow/index.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<header class="header">
  <div class="navbar">
    <div class="navbar-brand">
      <div class="ocpn-logo"> </div>
      <a class="navbar-title"
         href="https://leamas.github.io/ocpn-manuals"
      >
        OpenCPN Developer Manual
        </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
       <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="https://www.opencpn.org/">
                OpenCPN.org
              </a>
              <a class="navbar-item" href="https://opencpn.org/wiki/dokuwiki/doku.php?id&#x3D;opencpn:opencpn_user_manual
">
                User Manual
              </a>
              <a class="navbar-item" href="https://github.com/opencpn/OpenCPN">
                Github Site
              </a>
              <a class="navbar-item" href="https://opencpn.org/flyspray/">
                Bugtracker
              </a>
              <a class="navbar-item" href="https://rasbats.github.io/opencpn-plugins-manual/">
                Plugin Manual (WIP)
              </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="AlternativeWorkflow" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Shipdriver Managed Workflow for OpenCPN plugins</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="index.html">Using the Shipdriver Managed Workflow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="usage.html">End User Usage</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Alternative-Workflow.html">The Shipdriver Workflow</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Metadata-Flow.html">Metadata Files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Builders</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Appveyor.html">Appveyor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CircleCI.html">CircleCI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Github-Actions.html">Github Actions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Drone.html">drone.io</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Cloud-Service-Changes.html">Cloud service changes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Cloudsmith.html">Cloudsmith</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Custom-cloudsmith-repositories.html">Custom Cloudsmith Repositories</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Travis.html">Travis</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="GitHub.html">GitHub</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Plugin-Adaptation.html">Adapting the plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="CodeChange.html">Code Changes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Local-Build.html">Local Builds</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Catalog-Github-Integration.html">Automatic Git Push of Metadata</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Useful-Stuff.html">Useful information</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Shipdriver Managed Workflow for OpenCPN plugins</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../ocpn-dev-manual/5.3.1/index.html">OpenCPN Developer Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../ocpn-dev-manual/5.3.1/index.html">5.3.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../plugin-installer/0.0.1/Home.html">Plugin Installer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../plugin-installer/0.0.1/Home.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Shipdriver Managed Workflow for OpenCPN plugins</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../ocpn-dev-manual/5.3.1/intro-AboutThisManual.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Shipdriver Managed Workflow for OpenCPN plugins</a></li>
    <li><a href="index.html">Using the Shipdriver Managed Workflow</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Shipdriver Templates for OpenCPN Plugins</h1>
<div class="sect1">
<h2 id="_templates_at_a_glance"><a class="anchor" href="#_templates_at_a_glance"></a>Templates at a glance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The shipdriver templates is a set of buildsystem templates which
can be applied to any OpenCPN plugin. The templates provide</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Generation of tarballs which can be used by the plugin installer</p>
</li>
<li>
<p>Uploading of tarballs to Cloudsmith</p>
</li>
<li>
<p>Generation of XML metadata with correct download urls and tarball chacksum</p>
</li>
<li>
<p>Support for making PRs to the plugins project (i. e., the catalog) by
committing metadata automatically into git.</p>
</li>
<li>
<p>Well-defined local builds of tarballs which can be imported</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Usage of these templates on a configured plugin is documented in the
<a href="usage.html" class="page">usage page</a>. These instructions are shipped with the
plugin in the file <code>INSTALL.md</code>.</p>
</div>
<div class="paragraph">
<p>The following guide illustrates how these templates can be applied
from scratch to a plugin.</p>
</div>
<div class="paragraph">
<p>This guide should be read alongside the README files in the
<a href="https://github.com/Rasbats/ShipDriver_pi">ShipDriver repository</a>.</p>
</div>
<div class="paragraph">
<p>A simplified guide is available as a
<a href="https://github.com/Rasbats/managed_plugins/blob/main/cheatsheet/Managed.Workflow.Cheat.Sheet.pdf">cheat
sheet</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_overall_managed_plugin_flow"><a class="anchor" href="#_the_overall_managed_plugin_flow"></a>The overall managed plugin flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A managed plugin becomes available for an OpenCPN user in the Plugins
options dialog. Here, a number of plugins are available for users so
they can just click on a plugin to install it. The managed plugins
workflow is the way a plugin becomes available for users in this UI
dialog.</p>
</div>
<div class="paragraph">
<p>In general, plugin code flows like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Source code is stored and eventually tagged and released on Github</p>
</li>
<li>
<p>As soon as a change is committed a number of builder services build
the code for around 10 platforms.</p>
</li>
<li>
<p>The compiled plugins are stored on cloudsmith. Here, they get a url
which can be used to download them.</p>
</li>
<li>
<p>The builds also produce
 <a href="Metadata-Flow.html" class="page">metadata files</a>
with plugin data such as name, platform, various info and the
download URL.</p>
</li>
<li>
<p>The metadata files are used to create a catalog. This catalog is the
underpinning for the list of plugins in the OpenCPN plugin dialog.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alec Leamas is the main architect of the managed plugin system for
OpenCPN. His guide is
<a href="https://github.com/leamas/OpenCPN/wiki">here</a>.</p>
</div>
<div class="paragraph">
<p>The
<a href="https://opencpn.org/wiki/dokuwiki/doku.php?id=opencpn:developer_manual:pi_installer_summary">OpenCPN Developers Manual</a>
has extensive documentation for managed plugins but the workflow
described in the manual differs significantly from the process described
in this guide.</p>
</div>
<div class="paragraph">
<p>A managed plugin will nearly always start as a `legacy' plugin that
installs locally on the developers machine. Alec has provided new
scripts to build a managed version of the plugin for OpenCPN. The legacy
plugin is the starting point and the purpose of this guide is to
describe the steps involved. The aim is to simplify the workflow.</p>
</div>
<div class="paragraph">
<p>The reference plugin where the development work has been carried out is
<a href="https://github.com/Rasbats/shipdriver_pi">ShipDriver</a>
(Master branch).
To show the process from the start
<a href="https://github.com/Rasbats/TideFinder_pi">TideFinder</a> is used as an
illustration.</p>
</div>
<div class="paragraph">
<p>Mike Rossiter, who developed the ShipDriver and TideFinder plugins,
assisted by testing the workflow. He has produced this guide to assist
developers in making a managed plugin. Please report any errors or
omissions using the issues tab of this GitHub repository.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_shipdriver_workflow"><a class="anchor" href="#_the_shipdriver_workflow"></a>The Shipdriver Workflow</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="Alternative-Workflow.html" class="page">The Shipdriver Workflow</a></p>
</div>
<div class="paragraph">
<p><a href="#Plugin-Dependencies.adoc" class="page unresolved">A Note on Plugin Dependencies</a></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.
     Sources: https://gitlab.com/leamas/antora-ui-default
  </p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
